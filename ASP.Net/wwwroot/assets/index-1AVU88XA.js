import{R as l,g as i,d as E}from"./alerts-wuHK3Tp9.js";class f{constructor(e,o,t,c,m,h){this.extUrl=o,this.intUrl=t,this.timeofcreation=c,this.counter=m;const a=h.insertRow(),p=a.insertCell(),d=a.insertCell(),g=a.insertCell(),u=a.insertCell();p.append(this.generateLink(o,o)),d.append(this.generateLink(t,t)),g.append(this.generateElement("p",c));let s=document.createElement("a");s.className="btn btn-primary",s.href="edit.html?id="+String(e),s.role="button",s.textContent="Изменить";let r=this.generateElement("div","<p>"+String(m)+"</p>");r.className="tableflex",r.append(s),u.append(r),this.mainElement=a}mainElement;generateElement(e,o){let t=document.createElement(e);return t.innerHTML=o??"",t}generateLink(e,o){let t=document.createElement("a");return t.textContent=o??"",t.href=e,t}}var S={VITE_BackEndpoint:"http://localhost:5093",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};switch(sessionStorage.getItem("operation")){case"updated":i("Успешно обновлено!"),sessionStorage.removeItem("operation");break;case"removed":i("Успешно удалено!"),sessionStorage.removeItem("operation");break;case"created":let n="Ссылка создана: "+"http://localhost:5093".concat(l.shortLinks,JSON.parse(sessionStorage.getItem("object")).shortUrl);i(n,4e3),sessionStorage.removeItem("object"),sessionStorage.removeItem("operation")}const k=document.getElementById("table_inner");try{const n=await b();v(n)}catch{console.log(S),E("Невозможно получить данные с сервера, проверьте подключение")}async function b(){let n=0,e=30,o=[],t=[];do t=await L(n,e),o.push(...t),n+=e;while(t.length>=e);return o}async function L(n,e){return await(await fetch("http://localhost:5093"+l.getLinks+new URLSearchParams({offset:String(n),count:String(e)}),{method:"get"})).json()}function v(n){n.forEach(e=>{new f(e.id,e.realUrl,"http://localhost:5093".concat(l.shortLinks,e.shortUrl),e.creationDate,e.countOfTransitions,k)})}
