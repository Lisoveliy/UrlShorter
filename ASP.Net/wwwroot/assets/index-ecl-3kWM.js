import{R as a,g as s,d}from"./alerts-YNeu-kSX.js";class E{constructor(e,t,n,i,l,c){this.extUrl=t,this.intUrl=n,this.timeofcreation=i,this.counter=l;const r=c.insertRow(),m=r.insertCell(),h=r.insertCell(),u=r.insertCell(),g=r.insertCell();m.append(this.generateLink(t,t)),h.append(this.generateLink(n,n)),u.append(this.generateElement("p",i));let p=this.getButton(e);g.append(this.getCounter(l,p)),this.mainElement=r}mainElement;getCounter(e,t){let n=this.generateElement("div","<p>"+String(e)+"</p>");return n.className="table__flex-counter",n.append(t),n}getButton(e){let t=document.createElement("a");return t.className="btn btn-primary",t.href="edit.html?id="+String(e),t.role="button",t.textContent="Изменить",t}generateElement(e,t){let n=document.createElement(e);return n.innerHTML=t??"",n}generateLink(e,t){let n=document.createElement("a");return n.textContent=t??"",n.href=e,n}}var f={VITE_BackEndpoint:"http://localhost:5093",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};switch(sessionStorage.getItem("operation")){case"updated":s("Успешно обновлено!"),sessionStorage.removeItem("operation");break;case"removed":s("Успешно удалено!"),sessionStorage.removeItem("operation");break;case"created":let o="Ссылка создана: "+"http://localhost:5093".concat(a.shortLinks,JSON.parse(sessionStorage.getItem("object")).shortUrl);s(o,4e3),sessionStorage.removeItem("object"),sessionStorage.removeItem("operation")}const S=document.getElementById("table_inner");try{const o=await b();L(o)}catch{console.log(f),d("Невозможно получить данные с сервера, проверьте подключение")}async function b(){let o=0,e=30,t=[],n=[];do n=await k(o,e),t.push(...n),o+=e;while(n.length>=e);return t}async function k(o,e){return await(await fetch("http://localhost:5093"+a.getLinks+new URLSearchParams({offset:String(o),count:String(e)}),{method:"get"})).json()}function L(o){o.forEach(e=>{new E(e.id,e.realUrl,"http://localhost:5093".concat(a.shortLinks,e.shortUrl),e.creationDate,e.countOfTransitions,S)})}
