import{R as s,d as r}from"./alerts-YNeu-kSX.js";/* empty css             */class c{constructor(o,n){if(o)switch(o.submitter.id){case"removebutton":this.removeLink(n);break;case"submitbutton":this.modifyLink(n);break}else this.modifyLink(n)}async removeLink(o){(await fetch("http://localhost:5093"+s.removeLink+new URLSearchParams({id:String(o.id)}),{method:"DELETE"})).ok?(document.location.href="/",sessionStorage.setItem("operation","removed")):r()}async modifyLink(o){(await fetch("http://localhost:5093"+s.updateLink,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:o.id,newlink:o.realUrl,resetcounter:o.countOfTransitions==0})})).ok?(document.location.href="/",sessionStorage.setItem("operation","updated")):r(null,!0)}}const a=Number(new URLSearchParams(window.location.search).get("id"));let i=document.getElementById("shortUrlInput"),d=document.getElementById("shortedUrlInput"),u=document.getElementById("times"),l=document.getElementById("resetCounter"),t;if(!a)r();else try{t=await h(a),t.id===void 0?r():m(t)}catch{r("Невозможно получить данные с сервера, проверьте подключение")}document.addEventListener("keypress",e=>{e.key=="Enter"&&console.log(e),t.id!==void 0&&(t.realUrl=i.value,t.countOfTransitions=l.checked==!0?0:t.countOfTransitions,new c(null,t))});document.getElementById("modifyform").addEventListener("submit",e=>{e.preventDefault(),t.id!==void 0&&(t.realUrl=i.value,t.countOfTransitions=l.checked==!0?0:t.countOfTransitions,new c(e,t))});function m(e){i.value=e.realUrl,d.value="http://localhost:5093".concat("/",e.shortUrl),u.textContent=String(e.countOfTransitions)}async function h(e){var o=await fetch("http://localhost:5093"+s.getLink+e);return await o.json()}
